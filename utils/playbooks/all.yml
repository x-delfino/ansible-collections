---
- name: group hosts
  hosts: all
  tasks:
    - name: group hosts depending on their OS type
      ansible.builtin.group_by:
        key: os_{{ ansible_system | lower }}
      changed_when: false

- hosts: "{{ 'os_linux:&' + target|default('all')}}"
  roles:
    - x_delfino.utils.curl
    - x_delfino.utils.nnn
    - x_delfino.utils.ohmyzsh
    - x_delfino.utils.tmux
    - x_delfino.utils.tmuxp
    - x_delfino.utils.tpm
    - x_delfino.utils.unzip
    - x_delfino.utils.vim_plug
    - x_delfino.utils.wget
    - x_delfino.utils.zip
    - x_delfino.utils.zsh

- hosts: "{{target|default('all')}}"
  roles:
    - x_delfino.utils.alacritty
    - x_delfino.utils.git
    - x_delfino.utils.golang
    - x_delfino.utils.neovim
    - x_delfino.utils.powershell
    - x_delfino.utils.ps_script_analyzer
    - x_delfino.utils.py3_virtualenv
    - x_delfino.utils.python3
    - x_delfino.utils.rust
    - x_delfino.utils.rust_analyzer
